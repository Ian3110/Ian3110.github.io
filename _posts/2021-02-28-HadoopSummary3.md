---
layout: post
title: "하둡 분산 파일 시스템(HDFS)"
categories:
- Hadoop
---

## HDFS
---
-	하둡은 **HDFS(Hadoop Distributed File System)**라는 분산 파일 시스템을 제공함.<br/><br/>
-	여러 서버에 HDFS용 영역을 구성하고, 이것을 하나의 논리적인 파일 시스템으로 만듦.<br/><br/>
-	클라이언트는 어떤 노드에 어떤 데이터가 있는지 신경 쓸 필요 없이 파일 시스템 상의 데이터를 읽고 쓸 수 있음.<br/><br/><br/><br/>

## HDFS의 특징
---
### 대용량 데이터를 범용 서버만으로 처리
-   HDFS에 저장하는 파일 크기는 수 GB에서 수 PB에 이름. 파일 크기나 파일 시스템 크기에 제한이 없음.<br/><br/><br/>
  
### 용량 확장성이 있음
-   HDFS는 노드를 추가하는 것으로 영역 크기 쉽게 늘릴 수 있음. 시스템을 단계적으로 확장할 수 있기에, 불필요한 투자를 방지할 수 있음.<br/><br/><br/>
  
### 순차적 접근으로 높은 처리량 실현
-   HDFS는 대화형 처리가 아닌 일괄 처리에 적합함 시스템임. 처리 속도(latency)보다는 **처리량(throughput)**을 중시함.<br/><br/>
-   파일 접근 패턴은 **‘Write Once, Read Many’** 방식 채택함. 작성된 데이터를 부분적으로 변경할 수 없음.<br/><br/>
-   대량의 데이터에 빠른 속도로 접근하는 데 특화되어 있기에 순차적 접근 패턴만 제공함. 랜덤 접근은 고려하지 않음.<br/><br/><br/>
  
### 슬레이브 노드 일부가 고장 나도 데이터 손실 방지함.
-   복수의 노드에 데이터 복제를 유지하기에 손실을 방지할 수 있음.<br/><br/><br/><br/>


## HDFS의 블록
---
-	물리적인 디스크에 블록이라는 개념이 있음. 블록 크기는 한 번에 읽고 쓸 수 있는 데이터의 최대량임.<br/><br/>
-	HDFS의 블록은 기본적으로 **128MB**로 굉장히 큰 단위임. 상당히 크기 때문에 블록 탐색 비용을 최소화할 수 있음.<br/><br/>
-	1MB의 파일이 기록되면 실제 디스크 영역도 1MB만 확보함.<br/><br/><br/>


## HDFS의 구조
---
-	HDFS에서 사용하는 서버는 마스터-슬레이브 구성임. 마스터 서버는 네임 노드(Name Node)라고 하며 슬레이브 서버는 데이터(Data Node)라고 함.<br/><br/>

### Name Node
* **메타 데이터 관리**
    -	메타 데이터란 파일 속성 정보나 파일 시스템 정보를 말하며 ‘어떤 블록이 어떤 파일의 어떤 부분에 있는가’하는 정보를 기록하고 있음. 데이터 자체는 데이터 노드가 분산해서 가지고 있지만, 네임 노드가 메타 데이터를 기반으로 HDFS를 전체적으로 관리함.<br/><br/>
    -	HDFS의 접속 요구를 디스크에 접근하지 않고 메모리 상의 데이터만 사용하여 완료하기에 매우 빠른 응답이 가능함.<br/><br/><br/>

* **HDFS 사용 상황 관리**
    -	특정 데이터 노드의 HDFS용 영익이 거의 다 찬 경우, 해당 데이터 노드가 관리하고 있는 블록을 용량에 여우가 있는 다른 데이터 노드로 이동시킴.<br/><br/>
    -	블록의 복제 본 수 관리. 블록 복제 본 수가 사전 설정 값(보통 3)과 일치 하지 않으면 블록을 새로 만들거나 삭제함.<br/><br/><br/>

* **클라이언트로부터의 요청 접수**
    -	클라이언트가 HDFS에 파일 접근 요청을 보내면 가장 먼저 접속하는 것이 네임 노드임. 요청이 네임 노드에 도달하면, 보관하고 있던 메타 데이터를 바탕으로 대상 블록을 가지고 있는 데이터 노드 리스트를 클라이언트에 전달함.<br/><br/><br/>

* **데이터 노드 다운 여부 감시**
    -	네임 노드는 데이터 노드 중지 여부를 감시함. 데이터 노드는 자신의 생존 여부를 전달하기 위해 하트비트(Heartbeat)라는 패킷을 일정 간격으로 전송함. 네임 노드는 하트비트를 수신하지 못하는 데이터 노드에 대해 고장 판단을 내림.<br/><br/><br/>

### Data Node
  * 파일 시스템의 실질적인 일꾼임. 사용자가 데이터 노드 상에 투입한 파일의 데이터 블록을 저장하고 탐색하며, 저장하고 있는 블록의 목록을 주기적으로 네임 노드에 보고함.<br/><br/><br/>

### HDFS 클라이언트
  * HDFS 클라이언트는 사용자를 대신해 네임 노드와 데이터 노드 사이에서 통신하고 파일 시스템에 접근함. 사용자는 네임 노드와 데이터 노드에 관련된 함수를 몰라도 코드를 작성할 수 있음.<br/><br/><br/><br/>



 *페더레이션, HA, IO, 명령어 내용 추가하기.*